# 22 Задача (4б)

### Ответ на вопрос

**Какова временная сложность алгоритма?**  
Основная вычислительная сложность алгоритма определяется двумя этапами:

- **Предварительный этап вычисления допустимых переходов:**  
Здесь два вложенных цикла перебирают все пары состояний строки. Если обозначить число состояний строки как S, где S = 2^(cols) (а cols = min(M, N)), то этот этап имеет сложность:
$$
O(S^2 \times \text{cols}) = O(2^{2 \cdot \text{cols}} \times \text{cols})
$$

- **Этап динамического программирования:**  
Здесь внешний цикл выполняется по количеству строк (rows = max(M, N)), а во внутреннем цикле перебираются состояния (S вариантов) и для каждого состояния — допустимые переходы (в худшем случае до S вариантов). Поэтому этот этап имеет сложность:
$$
O(\text{rows} \times S^2) = O(\text{max}(M, N) \times 2^{2 \cdot \text{cols}})
$$

**Общая временная сложность алгоритма:**
$$
O(2^{2 \cdot \text{min}(M, N)} \times (\text{min}(M, N) + \text{max}(M, N)))
$$
или упрощённо:
$$
O(2^{2 \cdot \text{min}(M, N)} \times \text{max}(M, N))
$$

Таким образом, алгоритм экспоненциально зависит от меньшей из размерностей (min(M, N)), что является приемлемым при условии, что произведение M×N не превышает 30.

---

**Итог:**
- Временная сложность — экспоненциальная по min(M, N): $(O(2^{2\cdot\text{min}(M, N)} \times \text{max}(M, N)))$.
